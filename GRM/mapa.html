<!DOCTYPE html>
<html>
    <head>
        <title>Mapa</title>
        <meta charset="utf-8" />
        <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
        <link href="styles/main.css" rel="stylesheet" />
        <script src="cordova.js"></script>
        <script src="kendo/js/jquery.min.js"></script>
        <script src="kendo/js/kendo.mobile.min.js"></script>
        <style>
            html, body, #map-canvas
            {
                height: 100%;
            }
            #map-canvas
            {
                width: 100%;
            }
        </style>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBAiS7qF-PK0OhGxupMlru1rF6DQq9t078 &callback=initMap">
        </script>

    </head>
    <body>
        <div id="tabstrip-mapa" 
             data-title="Mapa" 
             data-role="view"
             data-transition="fade"
             data-show="initMap"
             >
            <div id="map-canvas"></div>
            <div data-role="header">
                <div data-role="navbar" style="background-color: black; color: white;">
                    <span data-role="view-title">Mapa</span>
                    <a id="gfecha" data-align="left" data-role="button" style="background-color: black; color: white;">Fecha: 07-05-2015</a>
                    <a data-align="right" data-role="backbutton" style="background-color: black; color: white;">Volver</a>
                </div>
            </div>
            
            <script>
               function initMapa(e) 
               {
                  document.getElementById("gfecha").innerHTML = gfecha + " " + ghora;
                   
                  document.getElementById("map-canvas").style.width = String($(window).width()) + "px";
                  document.getElementById("map-canvas").style.height = String($(window).height() - 35 ) + "px";
                  initializeMapa();
               }   
               function initializeMapa() 
               {
                   //alert("works");
                    var mapCanvas = document.getElementById('map-canvas');
                    var mapOptions = {
                      center: new google.maps.LatLng(glatitud, glongitud),
                      zoom: 8,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    }
                    var map = new google.maps.Map(mapCanvas, mapOptions)
                  
                   var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(glatitud, glongitud),
                        map: map,
                        title: "Ubicacion del usuario",
                        animation: google.maps.Animation.DROP
                    });
               }
              
              //alert("works");
              //google.maps.event.addDomListener(window, 'load', initialize)
                
                
                function initMap() 
                {
                    var mapDiv = document.getElementById('map-canvas');
                    var map = new google.maps.Map(mapDiv, {
                                  zoom: 8,
                                  center: new google.maps.LatLng(-34.397, 150.644)
                    });

                    // We add a DOM event here to show an alert if the DIV containing the
                    // map is clicked.
                    google.maps.event.addDomListener(mapDiv, 'click', function() 
                    {
                         window.alert('Map was clicked!');
                    });
                }
            </script>
        </div>
    </body>
</html>